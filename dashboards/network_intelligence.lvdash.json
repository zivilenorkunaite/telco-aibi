{
  "datasets": [
    {
      "displayName": "KPI Metrics",
      "name": "kpi_metrics",
      "query": "SELECT \n  COUNT(DISTINCT poi_id) as total_pois,\n  ROUND(AVG(utilization_pct), 1) as avg_utilization_pct,\n  SUM(CASE WHEN congestion_status = 'Critical' THEN 1 ELSE 0 END) as critical_pois,\n  SUM(CASE WHEN congestion_status = 'Warning' THEN 1 ELSE 0 END) as warning_pois,\n  ROUND(AVG(avg_latency_ms), 1) as avg_latency_ms,\n  SUM(active_connections) as total_active_connections\nFROM zivile.telco.network_telemetry\nWHERE timestamp >= current_timestamp() - INTERVAL 1 HOUR"
    },
    {
      "displayName": "State Performance",
      "name": "state_performance",
      "query": "SELECT \n  state,\n  ROUND(AVG(utilization_pct), 1) as avg_utilization_pct,\n  COUNT(DISTINCT poi_id) as num_pois,\n  SUM(CASE WHEN congestion_status = 'Critical' THEN 1 ELSE 0 END) as critical_count\nFROM zivile.telco.network_telemetry\nWHERE timestamp >= current_timestamp() - INTERVAL 1 HOUR\nGROUP BY state\nORDER BY avg_utilization_pct DESC"
    },
    {
      "displayName": "Technology Performance",
      "name": "technology_performance",
      "query": "SELECT \n  technology_type,\n  ROUND(AVG(utilization_pct), 1) as avg_utilization_pct,\n  ROUND(AVG(avg_latency_ms), 1) as avg_latency_ms,\n  ROUND(AVG(packet_loss_pct), 3) as avg_packet_loss_pct,\n  ROUND(AVG(avg_download_speed_pct), 1) as avg_speed_achievement_pct\nFROM zivile.telco.network_telemetry\nWHERE timestamp >= current_timestamp() - INTERVAL 24 HOURS\nGROUP BY technology_type\nORDER BY avg_utilization_pct DESC"
    },
    {
      "displayName": "Hourly Utilization Trend",
      "name": "hourly_trend",
      "query": "SELECT \n  hour,\n  ROUND(AVG(utilization_pct), 1) as avg_utilization_pct,\n  ROUND(MAX(utilization_pct), 1) as max_utilization_pct,\n  ROUND(MIN(utilization_pct), 1) as min_utilization_pct\nFROM zivile.telco.network_telemetry\nWHERE date >= current_date() - INTERVAL 7 DAYS\nGROUP BY hour\nORDER BY hour"
    },
    {
      "displayName": "Current POI Status",
      "name": "current_poi_status",
      "query": "WITH latest_telemetry AS (\n  SELECT \n    poi_id,\n    suburb,\n    state,\n    technology_type,\n    utilization_pct,\n    congestion_status,\n    avg_latency_ms,\n    active_connections,\n    ROW_NUMBER() OVER (PARTITION BY poi_id ORDER BY timestamp DESC) as rn\n  FROM zivile.telco.network_telemetry\n)\nSELECT \n  poi_id,\n  suburb,\n  state,\n  technology_type,\n  utilization_pct,\n  congestion_status,\n  avg_latency_ms,\n  active_connections\nFROM latest_telemetry\nWHERE rn = 1\nORDER BY utilization_pct DESC\nLIMIT 15"
    },
    {
      "displayName": "Capacity Risk Forecast",
      "name": "capacity_risk_forecast",
      "query": "SELECT \n  suburb,\n  city,\n  state,\n  technology_type,\n  ROUND(current_peak_utilization_pct, 1) as current_utilization_pct,\n  ROUND(projected_utilization_pct, 1) as projected_6mo_pct,\n  risk_score,\n  CONCAT('$', FORMAT_NUMBER(estimated_upgrade_cost_aud, 0)) as upgrade_cost,\n  ROUND(confidence_score * 100, 0) as confidence_pct\nFROM zivile.telco.capacity_forecasts\nWHERE months_ahead = 6\n  AND risk_score IN ('Critical', 'High')\nORDER BY projected_utilization_pct DESC"
    },
    {
      "displayName": "Recent Incidents",
      "name": "recent_incidents",
      "query": "SELECT \n  incident_id,\n  suburb,\n  state,\n  incident_type,\n  severity,\n  DATE_FORMAT(incident_time, 'yyyy-MM-dd HH:mm') as incident_time,\n  ROUND(duration_hours, 1) as duration_hours,\n  FORMAT_NUMBER(customers_affected, 0) as customers_affected,\n  status\nFROM zivile.telco.incidents\nWHERE incident_time >= current_timestamp() - INTERVAL 30 DAYS\nORDER BY incident_time DESC\nLIMIT 20"
    },
    {
      "displayName": "Speed Achievement",
      "name": "speed_achievement",
      "query": "SELECT \n  CASE \n    WHEN speed_achievement_pct >= 90 THEN '90-100% (Excellent)'\n    WHEN speed_achievement_pct >= 75 THEN '75-90% (Good)'\n    WHEN speed_achievement_pct >= 50 THEN '50-75% (Fair)'\n    ELSE 'Below 50% (Poor)'\n  END as speed_tier,\n  COUNT(*) as customer_count,\n  ROUND(COUNT(*) * 100.0 / SUM(COUNT(*)) OVER(), 1) as percentage\nFROM zivile.telco.customer_usage\nWHERE usage_date >= current_date() - INTERVAL 7 DAYS\nGROUP BY \n  CASE \n    WHEN speed_achievement_pct >= 90 THEN '90-100% (Excellent)'\n    WHEN speed_achievement_pct >= 75 THEN '75-90% (Good)'\n    WHEN speed_achievement_pct >= 50 THEN '50-75% (Fair)'\n    ELSE 'Below 50% (Poor)'\n  END\nORDER BY percentage DESC"
    }
  ],
  "pages": [
    {
      "displayName": "Network Overview",
      "layout": [
        {
          "position": {
            "height": 2,
            "width": 6,
            "x": 0,
            "y": 0
          },
          "widget": {
            "name": "d9a12c47",
            "textbox_spec": "# üåê SouthernLink Network Intelligence\n\nReal-time network health monitoring and capacity planning dashboard"
          }
        },
        {
          "position": {
            "height": 2,
            "width": 1,
            "x": 0,
            "y": 2
          },
          "widget": {
            "name": "counter_total_pois",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "kpi_metrics",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`total_pois`",
                      "name": "total_pois"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "value": {
                  "displayName": "Total POIs",
                  "fieldName": "total_pois"
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Total POIs"
              },
              "version": 3,
              "widgetType": "counter"
            }
          }
        },
        {
          "position": {
            "height": 2,
            "width": 1,
            "x": 1,
            "y": 2
          },
          "widget": {
            "name": "counter_utilization",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "kpi_metrics",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`avg_utilization_pct`",
                      "name": "avg_utilization_pct"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "value": {
                  "displayName": "Avg Utilization %",
                  "fieldName": "avg_utilization_pct"
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Avg Utilization %"
              },
              "version": 3,
              "widgetType": "counter"
            }
          }
        },
        {
          "position": {
            "height": 2,
            "width": 1,
            "x": 2,
            "y": 2
          },
          "widget": {
            "name": "counter_critical",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "kpi_metrics",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`critical_pois`",
                      "name": "critical_pois"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "value": {
                  "displayName": "Critical POIs",
                  "fieldName": "critical_pois"
                }
              },
              "frame": {
                "showTitle": true,
                "title": "üî¥ Critical"
              },
              "version": 3,
              "widgetType": "counter"
            }
          }
        },
        {
          "position": {
            "height": 2,
            "width": 1,
            "x": 3,
            "y": 2
          },
          "widget": {
            "name": "counter_warning",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "kpi_metrics",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`warning_pois`",
                      "name": "warning_pois"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "value": {
                  "displayName": "Warning POIs",
                  "fieldName": "warning_pois"
                }
              },
              "frame": {
                "showTitle": true,
                "title": "üü° Warning"
              },
              "version": 3,
              "widgetType": "counter"
            }
          }
        },
        {
          "position": {
            "height": 2,
            "width": 1,
            "x": 4,
            "y": 2
          },
          "widget": {
            "name": "counter_latency",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "kpi_metrics",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`avg_latency_ms`",
                      "name": "avg_latency_ms"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "value": {
                  "displayName": "Avg Latency (ms)",
                  "fieldName": "avg_latency_ms"
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Avg Latency (ms)"
              },
              "version": 3,
              "widgetType": "counter"
            }
          }
        },
        {
          "position": {
            "height": 2,
            "width": 1,
            "x": 5,
            "y": 2
          },
          "widget": {
            "name": "counter_connections",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "kpi_metrics",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`total_active_connections`",
                      "name": "total_active_connections"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "value": {
                  "displayName": "Active Connections",
                  "fieldName": "total_active_connections"
                }
              },
              "frame": {
                "showTitle": true,
                "title": "Active Connections"
              },
              "version": 3,
              "widgetType": "counter"
            }
          }
        },
        {
          "position": {
            "height": 4,
            "width": 3,
            "x": 0,
            "y": 4
          },
          "widget": {
            "name": "chart_state_perf",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "state_performance",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`state`",
                      "name": "state"
                    },
                    {
                      "expression": "`avg_utilization_pct`",
                      "name": "avg_utilization_pct"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "color": {
                  "displayName": "State",
                  "fieldName": "state",
                  "scale": {
                    "type": "categorical"
                  }
                },
                "x": {
                  "displayName": "Avg Utilization %",
                  "fieldName": "avg_utilization_pct",
                  "scale": {
                    "type": "quantitative"
                  }
                },
                "y": {
                  "displayName": "State",
                  "fieldName": "state",
                  "scale": {
                    "sort": {
                      "by": "x",
                      "direction": "descending"
                    },
                    "type": "categorical"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "üìä Utilization by State"
              },
              "version": 3,
              "widgetType": "bar"
            }
          }
        },
        {
          "position": {
            "height": 4,
            "width": 3,
            "x": 3,
            "y": 4
          },
          "widget": {
            "name": "chart_tech_perf",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "technology_performance",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`technology_type`",
                      "name": "technology_type"
                    },
                    {
                      "expression": "`avg_utilization_pct`",
                      "name": "avg_utilization_pct"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "color": {
                  "displayName": "Technology",
                  "fieldName": "technology_type",
                  "scale": {
                    "type": "categorical"
                  }
                },
                "x": {
                  "displayName": "Avg Utilization %",
                  "fieldName": "avg_utilization_pct",
                  "scale": {
                    "type": "quantitative"
                  }
                },
                "y": {
                  "displayName": "Technology",
                  "fieldName": "technology_type",
                  "scale": {
                    "sort": {
                      "by": "x",
                      "direction": "descending"
                    },
                    "type": "categorical"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "üì° Technology Performance"
              },
              "version": 3,
              "widgetType": "bar"
            }
          }
        },
        {
          "position": {
            "height": 4,
            "width": 6,
            "x": 0,
            "y": 8
          },
          "widget": {
            "name": "chart_hourly_trend",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "hourly_trend",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`hour`",
                      "name": "hour"
                    },
                    {
                      "expression": "`avg_utilization_pct`",
                      "name": "avg_utilization_pct"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "x": {
                  "displayName": "Hour of Day",
                  "fieldName": "hour",
                  "scale": {
                    "type": "quantitative"
                  }
                },
                "y": {
                  "displayName": "Avg Utilization %",
                  "fieldName": "avg_utilization_pct",
                  "scale": {
                    "type": "quantitative"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "‚è∞ Peak Hour Utilization Trend (Last 7 Days)"
              },
              "version": 3,
              "widgetType": "line"
            }
          }
        },
        {
          "position": {
            "height": 5,
            "width": 6,
            "x": 0,
            "y": 12
          },
          "widget": {
            "name": "table_poi_status",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "current_poi_status",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`poi_id`",
                      "name": "poi_id"
                    },
                    {
                      "expression": "`suburb`",
                      "name": "suburb"
                    },
                    {
                      "expression": "`state`",
                      "name": "state"
                    },
                    {
                      "expression": "`technology_type`",
                      "name": "technology_type"
                    },
                    {
                      "expression": "`utilization_pct`",
                      "name": "utilization_pct"
                    },
                    {
                      "expression": "`congestion_status`",
                      "name": "congestion_status"
                    },
                    {
                      "expression": "`avg_latency_ms`",
                      "name": "avg_latency_ms"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "columns": [
                  {
                    "displayName": "POI ID",
                    "fieldName": "poi_id"
                  },
                  {
                    "displayName": "Suburb",
                    "fieldName": "suburb"
                  },
                  {
                    "displayName": "State",
                    "fieldName": "state"
                  },
                  {
                    "displayName": "Technology",
                    "fieldName": "technology_type"
                  },
                  {
                    "displayName": "Utilization %",
                    "fieldName": "utilization_pct"
                  },
                  {
                    "displayName": "Status",
                    "fieldName": "congestion_status"
                  },
                  {
                    "displayName": "Latency (ms)",
                    "fieldName": "avg_latency_ms"
                  }
                ]
              },
              "frame": {
                "showTitle": true,
                "title": "üîç Current POI Status (Top 15 by Utilization)"
              },
              "version": 3,
              "widgetType": "table"
            }
          }
        }
      ],
      "name": "network_overview"
    },
    {
      "displayName": "Capacity Planning",
      "layout": [
        {
          "position": {
            "height": 2,
            "width": 6,
            "x": 0,
            "y": 0
          },
          "widget": {
            "name": "capacity_title",
            "textbox_spec": "# üìà Capacity Planning & Risk Forecast\n\nML-powered predictions for network capacity over the next 6 months"
          }
        },
        {
          "position": {
            "height": 7,
            "width": 6,
            "x": 0,
            "y": 2
          },
          "widget": {
            "name": "table_risk_forecast",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "capacity_risk_forecast",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`suburb`",
                      "name": "suburb"
                    },
                    {
                      "expression": "`city`",
                      "name": "city"
                    },
                    {
                      "expression": "`state`",
                      "name": "state"
                    },
                    {
                      "expression": "`technology_type`",
                      "name": "technology_type"
                    },
                    {
                      "expression": "`current_utilization_pct`",
                      "name": "current_utilization_pct"
                    },
                    {
                      "expression": "`projected_6mo_pct`",
                      "name": "projected_6mo_pct"
                    },
                    {
                      "expression": "`risk_score`",
                      "name": "risk_score"
                    },
                    {
                      "expression": "`upgrade_cost`",
                      "name": "upgrade_cost"
                    },
                    {
                      "expression": "`confidence_pct`",
                      "name": "confidence_pct"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "columns": [
                  {
                    "displayName": "Suburb",
                    "fieldName": "suburb"
                  },
                  {
                    "displayName": "City",
                    "fieldName": "city"
                  },
                  {
                    "displayName": "State",
                    "fieldName": "state"
                  },
                  {
                    "displayName": "Technology",
                    "fieldName": "technology_type"
                  },
                  {
                    "displayName": "Current %",
                    "fieldName": "current_utilization_pct"
                  },
                  {
                    "displayName": "Projected 6-Mo %",
                    "fieldName": "projected_6mo_pct"
                  },
                  {
                    "displayName": "Risk",
                    "fieldName": "risk_score"
                  },
                  {
                    "displayName": "Upgrade Cost",
                    "fieldName": "upgrade_cost"
                  },
                  {
                    "displayName": "Confidence %",
                    "fieldName": "confidence_pct"
                  }
                ]
              },
              "frame": {
                "showTitle": true,
                "title": "üî¥ High Risk Suburbs - 6 Month Capacity Forecast"
              },
              "version": 3,
              "widgetType": "table"
            }
          }
        }
      ],
      "name": "capacity_planning"
    },
    {
      "displayName": "Incidents",
      "layout": [
        {
          "position": {
            "height": 2,
            "width": 6,
            "x": 0,
            "y": 0
          },
          "widget": {
            "name": "incidents_title",
            "textbox_spec": "# üö® Network Incidents & Alerts\n\nHistorical incident tracking and root cause analysis"
          }
        },
        {
          "position": {
            "height": 7,
            "width": 6,
            "x": 0,
            "y": 2
          },
          "widget": {
            "name": "table_incidents",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "recent_incidents",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`incident_id`",
                      "name": "incident_id"
                    },
                    {
                      "expression": "`suburb`",
                      "name": "suburb"
                    },
                    {
                      "expression": "`state`",
                      "name": "state"
                    },
                    {
                      "expression": "`incident_type`",
                      "name": "incident_type"
                    },
                    {
                      "expression": "`severity`",
                      "name": "severity"
                    },
                    {
                      "expression": "`incident_time`",
                      "name": "incident_time"
                    },
                    {
                      "expression": "`duration_hours`",
                      "name": "duration_hours"
                    },
                    {
                      "expression": "`customers_affected`",
                      "name": "customers_affected"
                    },
                    {
                      "expression": "`status`",
                      "name": "status"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "columns": [
                  {
                    "displayName": "Incident ID",
                    "fieldName": "incident_id"
                  },
                  {
                    "displayName": "Suburb",
                    "fieldName": "suburb"
                  },
                  {
                    "displayName": "State",
                    "fieldName": "state"
                  },
                  {
                    "displayName": "Type",
                    "fieldName": "incident_type"
                  },
                  {
                    "displayName": "Severity",
                    "fieldName": "severity"
                  },
                  {
                    "displayName": "Time",
                    "fieldName": "incident_time"
                  },
                  {
                    "displayName": "Duration (hrs)",
                    "fieldName": "duration_hours"
                  },
                  {
                    "displayName": "Customers Affected",
                    "fieldName": "customers_affected"
                  },
                  {
                    "displayName": "Status",
                    "fieldName": "status"
                  }
                ]
              },
              "frame": {
                "showTitle": true,
                "title": "üìã Recent Incidents (Last 30 Days)"
              },
              "version": 3,
              "widgetType": "table"
            }
          }
        }
      ],
      "name": "incidents"
    },
    {
      "displayName": "Customer Experience",
      "layout": [
        {
          "position": {
            "height": 2,
            "width": 6,
            "x": 0,
            "y": 0
          },
          "widget": {
            "name": "cx_title",
            "textbox_spec": "# üë• Customer Experience\n\nSpeed achievement and service quality metrics"
          }
        },
        {
          "position": {
            "height": 5,
            "width": 3,
            "x": 0,
            "y": 2
          },
          "widget": {
            "name": "chart_speed_ach",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "speed_achievement",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`speed_tier`",
                      "name": "speed_tier"
                    },
                    {
                      "expression": "`customer_count`",
                      "name": "customer_count"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "angle": {
                  "displayName": "Customer Count",
                  "fieldName": "customer_count"
                },
                "color": {
                  "displayName": "Speed Tier",
                  "fieldName": "speed_tier",
                  "scale": {
                    "type": "categorical"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "üì∂ Speed Achievement Distribution"
              },
              "version": 3,
              "widgetType": "pie"
            }
          }
        },
        {
          "position": {
            "height": 5,
            "width": 3,
            "x": 3,
            "y": 2
          },
          "widget": {
            "name": "chart_speed_by_tech",
            "queries": [
              {
                "name": "main_query",
                "query": {
                  "datasetName": "technology_performance",
                  "disaggregated": true,
                  "fields": [
                    {
                      "expression": "`technology_type`",
                      "name": "technology_type"
                    },
                    {
                      "expression": "`avg_speed_achievement_pct`",
                      "name": "avg_speed_achievement_pct"
                    }
                  ]
                }
              }
            ],
            "spec": {
              "encodings": {
                "color": {
                  "displayName": "Technology",
                  "fieldName": "technology_type",
                  "scale": {
                    "type": "categorical"
                  }
                },
                "x": {
                  "displayName": "Avg Speed Achievement %",
                  "fieldName": "avg_speed_achievement_pct",
                  "scale": {
                    "type": "quantitative"
                  }
                },
                "y": {
                  "displayName": "Technology",
                  "fieldName": "technology_type",
                  "scale": {
                    "sort": {
                      "by": "x",
                      "direction": "descending"
                    },
                    "type": "categorical"
                  }
                }
              },
              "frame": {
                "showTitle": true,
                "title": "üìä Speed Achievement by Technology"
              },
              "version": 3,
              "widgetType": "bar"
            }
          }
        }
      ],
      "name": "customer_experience"
    }
  ]
}
